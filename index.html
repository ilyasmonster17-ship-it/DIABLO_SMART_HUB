<!DOCTYPE html>
<html lang="ar" dir="rtl" id="diablo-app">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Diablo Hub | Pro & Smart Edition</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>

<style>
:root { --p: #ff4500; --bg: #050505; --card: #111; --t: #fff; --border: #222; --highlight: #ffd700; }
.light-mode { --bg: #f5f5f5; --card: #fff; --t: #222; --border: #ddd; }
body { background: var(--bg); color: var(--t); font-family: 'Cairo', sans-serif; margin: 0; padding-bottom: 120px; transition: 0.3s; }
header { padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; background: var(--card); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 1000; gap: 10px; }
.search-bar { flex: 1; display: flex; background: var(--bg); border: 1px solid var(--border); border-radius: 20px; padding: 5px 15px; }
.search-bar input { border: none; background: none; color: var(--t); outline: none; width: 100%; font-size: 14px; }
.categories { display: flex; overflow-x: auto; gap: 10px; padding: 10px 5%; white-space: nowrap; }
.cat-btn { background: var(--card); border: 1px solid var(--border); color: var(--t); padding: 8px 20px; border-radius: 20px; cursor: pointer; font-size: 13px; }
.cat-btn.active { background: var(--p); border-color: var(--p); color: white; }
.publish-btn-main { position: fixed; bottom: 95px; left: 50%; transform: translateX(-50%); width: 50px; height: 40px; background: linear-gradient(90deg, #00f2ea 0%, #ff0050 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; z-index: 4500; cursor: pointer; border: none; box-shadow: 0 0 15px rgba(0,0,0,0.5); }
.publish-btn-main::after { content: '+'; color: black; font-size: 28px; font-weight: bold; background: white; width: 28px; height: 28px; border-radius: 5px; display: flex; align-items: center; justify-content: center; }
.publish-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 7000; display: none; align-items: center; justify-content: center; padding: 20px; }
.modal-content { background: var(--card); width: 100%; max-width: 500px; border-radius: 20px; padding: 20px; position: relative; max-height: 90vh; overflow-y: auto; }
.custom-file-upload { display: inline-block; padding: 20px; background: #1a1a1a; border: 2px dashed var(--p); border-radius: 15px; cursor: pointer; text-align: center; width: 100%; box-sizing: border-box; color: var(--p); }
.post-card { background: var(--card); border: 1px solid var(--border); border-radius: 15px; margin: 0 5% 20px 5%; padding: 15px; position: relative; border-right: 4px solid var(--p); }
.price-tag { position: absolute; top: 10px; left: 10px; background: #25d366; color: white; padding: 3px 12px; border-radius: 20px; font-weight: bold; font-size: 14px; }
#diablo-bot-icon { position: fixed; bottom: 20px; left: 20px; width: 60px; height: 60px; background: var(--p); border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 5500; cursor: pointer; border: 2px solid white; font-size: 24px; }
#bot-chat-window { position: fixed; bottom: 90px; left: 20px; width: 300px; height: 400px; background: var(--card); border: 1px solid var(--p); border-radius: 15px; display: none; flex-direction: column; z-index: 6000; }
.side-menu { position: fixed; top: 0; right: -100%; width: 280px; height: 100%; background: var(--card); z-index: 8000; transition: 0.4s; padding: 20px; overflow-y: auto; }
.side-menu.active { right: 0; }
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; z-index: 7500; }
.legal-page { display: none; padding: 20px; line-height: 1.6; }
.btn { background: var(--p); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
input, textarea, select { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid var(--border); background: var(--bg); color: var(--t); box-sizing: border-box; }
.ads-footer { position: fixed; bottom: 0; left: 0; width: 100%; height: 85px; background: #000; border-top: 2px solid var(--p); display: flex; justify-content: space-around; align-items: center; z-index: 4000; }
.highlight-btn { background: var(--highlight); color:black; font-weight:bold; }
.lang-toggle { background:none; border:1px solid var(--p); border-radius:20px; color:var(--p); padding:4px 10px; cursor:pointer; font-size:12px; margin-left:5px; }
</style>
</head>
<body>

<div id="startScreen" style="position:fixed; inset:0; background:var(--bg); z-index:9500; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:20px;">
<h1 style="color:var(--p)">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¯ÙŠØ§Ø¨Ù„Ùˆ Ù‡Ø¨</h1>
<p>Ø§Ø®ØªØ± ØµÙØªÙƒ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©:</p>
<button class="btn" style="max-width:300px;" onclick="setRole('investor')">Ø£Ù†Ø§ Ù…Ø³ØªØ«Ù…Ø± (Ø£Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù‚Ø§Ø±)</button>
<button class="btn" style="max-width:300px; background:#222; border:1px solid var(--p);" onclick="setRole('seller')">Ø£Ù†Ø§ Ù…Ø§Ù„Ùƒ (Ø£Ø±ÙŠØ¯ Ø§Ù„Ù†Ø´Ø±)</button>
</div>

<header>
<button onclick="toggleMenu()" style="background:none; border:none; color:var(--p); font-size:24px;">â˜°</button>
<div class="search-bar">
<input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ù‚Ø©ØŒ ÙÙŠÙ„Ø§..." oninput="filterPosts()">
</div>
<div>
<button class="lang-toggle" onclick="toggleLang()">AR/EN</button>
<button onclick="toggleTheme()" style="background:none; border:1px solid var(--p); color:var(--p); border-radius:20px; padding:4px 10px; font-size:12px;">MODE</button>
</div>
</header>

<div id="homePageContent">
<div class="categories">
<button class="cat-btn active" onclick="setCat('Ø§Ù„ÙƒÙ„')">Ø§Ù„ÙƒÙ„</button>
<button class="cat-btn" onclick="setCat('Ø´Ù‚Ù‚')">ğŸ™ï¸ Ø´Ù‚Ù‚</button>
<button class="cat-btn" onclick="setCat('ÙÙŠÙ„Ø§Øª')">ğŸ° ÙÙŠÙ„Ø§Øª</button>
<button class="cat-btn" onclick="setCat('Ù…Ù†Ø§Ø²Ù„')">ğŸ¡ Ù…Ù†Ø§Ø²Ù„</button>
<button class="cat-btn highlight-btn" onclick="showPremiumPage()">â­ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©</button>
</div>
<div id="cloudFeed"></div>
</div>

<div id="premiumPage" class="legal-page">
<button class="btn" onclick="showPage('home')" style="width:auto;">âœ• Ø¥ØºÙ„Ø§Ù‚</button>
<h2 style="color:var(--highlight)">â­ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h2>
<p>Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø§Ù„Ù…Ù…ÙŠØ² ÙŠØ¹Ø·ÙŠÙƒ:<br>
- Ø§Ù†ØªØ´Ø§Ø± Ø³Ø±ÙŠØ¹<br>
- Ù„ÙˆÙ† Ù…Ù…ÙŠØ² Ù„Ù„Ù…Ù†Ø´ÙˆØ±<br>
- Ù…Ø«Ø¨Øª ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰</p>
<p>Ù…Ø¯Ø© Ø§Ù„Ù…Ù†Ø´ÙˆØ±: 1-5 Ø£ÙŠØ§Ù… Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙØ¹</p>
<button onclick="contactWhatsApp()" style="margin-top:10px;">ğŸ“± ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± WhatsApp</button>
</div>

<div id="publishModal" class="publish-modal">
<div class="modal-content">
<h3 style="margin-top:0; color:var(--p)">Ù†Ø´Ø± Ù…Ù†Ø´ÙˆØ± Ø¬Ø¯ÙŠØ¯</h3>
<select id="pType"><option value="Ø´Ù‚Ù‚">Ø´Ù‚Ø©</option><option value="ÙÙŠÙ„Ø§Øª">ÙÙŠÙ„Ø§</option><option value="Ù…Ù†Ø§Ø²Ù„">Ù…Ù†Ø²Ù„</option></select>
<input type="text" id="pTitle" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
<input type="number" id="pPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<textarea id="pDesc" rows="4" placeholder="Ø§Ù„ØªÙØ§ØµÙŠÙ„"></textarea>
<label class="custom-file-upload"><input type="file" id="pFiles" multiple accept="image/*" onchange="handleFiles(this.files)" style="display:none;">ğŸ“¸ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±</label>
<div id="preGrid" style="display:flex; gap:5px; margin:10px 0; overflow-x:auto;"></div>
<div style="display:flex; gap:10px;"><button class="btn" onclick="uploadToFirebase()">Ù†Ø´Ø±</button><button class="btn" style="background:#444;" onclick="togglePublishModal()">Ø¥Ù„ØºØ§Ø¡</button></div>
</div>
</div>

<button class="publish-btn-main" id="mainPublishBtn" onclick="togglePublishModal()"></button>

<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<div class="side-menu" id="sideMenu">
<h3 style="color:var(--p)">DIABLO HUB</h3>
<button class="btn" onclick="showPage('home'); toggleMenu()">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
<hr>
<button class="btn" style="background:#222;" onclick="showPage('privacy'); toggleMenu()">ğŸ›¡ï¸ Ø§Ù„Ø®ØµÙˆØµÙŠØ©</button>
<button class="btn" style="background:#222;" onclick="showPage('disclaimer'); toggleMenu()">âš ï¸ Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©</button>
<button class="btn" style="background:#222;" onclick="showPage('terms'); toggleMenu()">âš–ï¸ Ø§Ù„Ø´Ø±ÙˆØ·</button>
<button class="btn highlight-btn" onclick="showPremiumPage()">â­ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©</button>
<hr>
<button class="btn" style="background:red;" onclick="location.reload()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
</div>

<div id="diablo-bot-icon" onclick="toggleChat()">ğŸ¤–</div>
<div id="bot-chat-window">
<div style="background:var(--p); padding:10px; color:white; display:flex; justify-content:space-between;"><span>Ø¯ÙŠØ§Ø¨Ù„Ùˆ Ø¨ÙˆØª</span><span onclick="toggleChat()">âœ•</span></div>
<div id="chat-msgs" style="flex:1; padding:10px; overflow-y:auto; display:flex; flex-direction:column; gap:5px;"></div>
<div style="display:flex; padding:5px; border-top:1px solid var(--border);">
<input type="text" id="bot-input" style="flex:1; border:none; background:none; color:var(--t);" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ...">
<button onclick="sendToBot()" style="border:none; background:none; color:var(--p);">Ø¥Ø±Ø³Ø§Ù„</button>
</div>
</div>

<div class="ads-footer"></div>

<script>
const db = {}; // Ù…Ø­Ø§ÙƒØ§Ø© db Ù„Ù†Ø´Ø± Ù…Ø­Ù„ÙŠ Ù…Ø¤Ù‚Øª
let posts = [], tempImgs = [], currentCat='Ø§Ù„ÙƒÙ„', botMemory=[], localUserId = localStorage.getItem('diabloUser') || Date.now(); localStorage.setItem('diabloUser', localUserId);

function setRole(role){ document.getElementById('startScreen').style.display='none'; document.getElementById('homePageContent').style.display='block'; if(role==='seller') document.getElementById('mainPublishBtn').style.display='flex'; loadCloudData(); }

function loadCloudData(){
const feed = document.getElementById('cloudFeed'); feed.innerHTML="";
posts.filter(p=>currentCat==='Ø§Ù„ÙƒÙ„'||p.type===currentCat).forEach(p=>{
const showDelete = (p.userId===localUserId); 
feed.innerHTML += `<div class="post-card" style="${p.premium?'border-color:var(--highlight)':''}">
<span class="price-tag">${p.price}$</span>
<div style="display:flex; overflow-x:auto; gap:10px;">${p.imgs.map(i=>`<img src="${i}" style="height:150px; border-radius:10px;">`).join('')}</div>
<h3>${p.title}</h3><p>${p.desc}</p>
<a href="tel:${p.phone}" style="background:var(--p); color:white; padding:10px; border-radius:8px; text-decoration:none; display:block; text-align:center;">ğŸ“ Ø§ØªØµØ§Ù„</a>
${showDelete?`<button onclick="deletePost('${p.id}')" style="color:red; background:none; border:none; margin-top:10px;">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±</button>`:''}
</div>`;});
}

function togglePublishModal(){ const m=document.getElementById('publishModal'); m.style.display=(m.style.display==='flex')?'none':'flex'; }
function handleFiles(files){ Array.from(files).forEach(f=>{ const r=new FileReader(); r.onload=e=>{ tempImgs.push(e.target.result); renderPre(); }; r.readAsDataURL(f); }); }
function renderPre(){ document.getElementById('preGrid').innerHTML=tempImgs.map(i=>`<img src="${i}" style="width:50px;height:50px;">`).join(''); }
function uploadToFirebase(){
const t=document.getElementById('pTitle').value, d=document.getElementById('pDesc').value, pr=document.getElementById('pPrice').value, tp=document.getElementById('pType').value;
posts.push({id:Date.now(), title:t, desc:d, price:pr, type:tp, imgs:tempImgs, userId:localUserId, premium:false});
tempImgs=[]; renderPre(); loadCloudData(); togglePublishModal();
}
function deletePost(id){ if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø­Ø°ÙØŸ")){ posts=posts.filter(p=>p.id!=id); loadCloudData(); } }
function setCat(c){ currentCat=c; document.querySelectorAll('.cat-btn').forEach(b=>b.classList.remove('active')); event.target.classList.add('active'); loadCloudData(); }
function toggleMenu(){ document.getElementById('sideMenu').classList.toggle('active'); document.getElementById('overlay').style.display=(document.getElementById('overlay').style.display==='block')?'none':'block'; }
function toggleTheme(){ document.body.classList.toggle('light-mode'); }
function toggleChat(){ const c=document.getElementById('bot-chat-window'); c.style.display=(c.style.display==='flex')?'none':'flex'; }
function sendToBot(){ 
const input=document.getElementById('bot-input').value.trim(); if(!input)return;
document.getElementById('chat-msgs').innerHTML+=`<div style="align-self:flex-end;background:var(--p);color:white;padding:5px 10px;border-radius:8px;">${input}</div>`;
document.getElementById('bot-input').value='';  
botMemory.push(input); localStorage.setItem('botMemory', JSON.stringify(botMemory));
let reply=""; 
if(input=== "3505Ilyas2008"){ 
if(posts.filter(p=>p.userId===localUserId).length===0) reply="Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§ØªÙƒ Ù„Ø­Ø°ÙÙ‡Ø§."; 
else { posts=posts.filter(p=>p.userId!==localUserId); reply="ØªÙ… Ø­Ø°Ù ÙƒÙ„ Ù…Ù†Ø´ÙˆØ±Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!"; loadCloudData(); } 
} else { 
// Ø±Ø¯ Ø°ÙƒÙŠ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ø¨Ø³ÙŠØ·
if(input.toLowerCase().includes("Ù…Ø±Ø­Ø¨Ø§")) reply="Ø£Ù‡Ù„Ø§Ù‹! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ";
else if(input.toLowerCase().includes("Ø´ÙƒØ±Ø§Ù‹")) reply="Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø­Ø¨ ÙˆØ§Ù„Ø³Ø¹Ø©!";
else reply="ğŸ˜ƒ ÙÙ‡Ù…Øª ÙƒÙ„Ø§Ù…ÙƒØŒ Ø£Ø®Ø¨Ø±Ù†ÙŠ Ø§Ù„Ù…Ø²ÙŠØ¯..."; 
}
document.getElementById('chat-msgs').innerHTML+=`<div style="align-self:flex-start;background:#444;color:white;padding:5px 10px;border-radius:8px;">${reply}</div>`;
document.getElementById('chat-msgs').scrollTop=document.getElementById('chat-msgs').scrollHeight;
}
function showPremiumPage(){ showPage('premium'); }
function showPage(p){ document.querySelectorAll('.legal-page, #homePageContent').forEach(div=>div.style.display='none'); if(p==='home') document.getElementById('homePageContent').style.display='block'; else document.getElementById(p+'Page').style.display='block'; }
function contactWhatsApp(){ window.open("https://wa.me/0695067840","_blank"); }
function toggleLang(){ alert("Ù…ÙŠØ²Ø© ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªØ·ÙˆÙŠØ± Ù„Ø§Ø­Ù‚Ø§Ù‹."); }
</script>
</body>
</html>
