<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DIABLO HUB</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo&display=swap');
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    font-family: 'Cairo', sans-serif;
    background-color: #000;
    color: #fff;
    direction: rtl;
    user-select: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  a {
    color: #ff5e00;
    text-decoration: none;
  }
  button, input, select {
    font-family: 'Cairo', sans-serif;
  }

  header {
    background-color: #111;
    height: 45px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 15px;
    border-bottom: 1px solid #222;
    position: fixed;
    top:0; left:0; right:0;
    z-index: 11;
  }
  header h1 {
    color: #ff4b00;
    font-weight: 900;
    font-size: 20px;
    margin: 0;
    user-select: none;
  }
  #menuToggle {
    display: flex;
    flex-direction: column;
    cursor: pointer;
    width: 26px;
    height: 20px;
    justify-content: space-between;
  }
  #menuToggle span {
    display: block;
    height: 3px;
    background: #ff4b00;
    border-radius: 3px;
  }

  /* Sidebar Menu */
  #sidebar {
    position: fixed;
    top: 45px; /* under header */
    right: 0;
    bottom: 0;
    width: 260px;
    background-color: #111;
    box-shadow: -4px 0 15px rgba(255, 75, 0, 0.25);
    padding: 20px;
    overflow-y: auto;
    transform: translateX(260px);
    transition: transform 0.3s ease;
    z-index: 10;
  }
  #sidebar.open {
    transform: translateX(0);
  }
  #sidebar h2 {
    margin-top: 0;
    font-weight: 900;
    color: #ff4b00;
    font-size: 25px;
    text-align: center;
    margin-bottom: 20px;
  }
  #sidebar button.menu-btn {
    width: 100%;
    margin-bottom: 12px;
    border-radius: 12px;
    padding: 12px 0;
    border: none;
    font-size: 16px;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s;
  }
  #sidebar button.menu-btn.primary {
    background-color: #ff4b00;
    color: #fff;
    font-weight: 700;
  }
  #sidebar button.menu-btn.primary:hover {
    background-color: #e04400;
  }
  #sidebar button.menu-btn.secondary {
    background-color: #222;
    color: #999;
  }
  #sidebar button.menu-btn.secondary:hover {
    background-color: #333;
    color: #ff4b00;
  }
  #sidebar .info-links button {
    background: none;
    border: none;
    color: #bbb;
    text-align: start;
    padding: 8px 0;
    font-size: 16px;
    cursor: pointer;
    width: 100%;
    border-bottom: 0.5px solid #333;
    user-select: none;
  }
  #sidebar .info-links button:hover {
    color: #ff4b00;
  }

  main {
    padding: 70px 15px 90px 15px;
    max-width: 360px;
    margin: auto;
  }
  main h2 {
    font-weight: 900;
    color: #ff4b00;
    font-size: 26px;
    margin-bottom: 8px;
    text-align: center;
    user-select: none;
  }
  main p.subtitle {
    color: #ccc;
    font-size: 15px;
    text-align: center;
    margin: 8px 0 20px 0;
    user-select: none;
  }

  /* Buttons to browse */
  #browseButtons {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 20px;
  }
  #browseButtons button {
    flex: 1 1 48%;
    background-color: #ff4b00;
    border: none;
    border-radius: 15px;
    padding: 12px 0;
    color: white;
    font-weight: 700;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.25s ease;
  }
  #browseButtons button:hover {
    background-color: #e04300;
  }
  #browseButtons button.secondary {
    background-color: transparent;
    border: 2.5px solid #ff4b00;
    color: #ff4b00;
  }
  #browseButtons button.secondary:hover {
    background-color: #ff4b00;
    color: #fff;
  }

  /* Category nav */
  #catNav {
    display: flex;
    gap: 6px;
    overflow-x: auto;
    margin-bottom: 25px;
    padding-bottom: 10px;
    user-select: none;
  }
  #catNav button {
    flex: 0 0 auto;
    background: #222;
    border: none;
    padding: 8px 14px;
    border-radius: 20px;
    color: #ccc;
    cursor: pointer;
    font-weight: 600;
    font-size: 16px;
    white-space: nowrap;
    transition: background-color 0.2s, color 0.2s;
  }
  #catNav button.active, #catNav button:hover {
    background-color: #ff4b00;
    color: #fff;
  }

  /* Ads List */
  #adsList {
    display: flex;
    flex-direction: column;
    gap: 14px;
    margin-bottom: 90px;
  }
  .ad-item {
    background-color: #222;
    padding: 14px 15px;
    border-radius: 15px;
    font-size: 16px;
    color: white;
    box-shadow: 0 0 8px #ff4b00aa;
  }
  .ad-item strong {
    color: #ff4b00;
  }
  .ad-item a {
    color: #ff4b00;
    font-weight: 700;
  }

  /* Floating + add button */
  #addAdBtn {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #ff4b00;
    border: none;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    font-size: 42px;
    color: white;
    font-weight: bold;
    box-shadow: 0 0 15px 3px #ff4b00bb;
    cursor: pointer;
    user-select: none;
    z-index: 20;
  }
  #addAdBtn:hover {
    background-color: #e04300;
  }

  /* Modal overlays */
  .modal-overlay {
    display: none;
    position: fixed;
    z-index: 100;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: rgba(0,0,0,0.85);
    backdrop-filter: blur(10px);
    justify-content: center;
    align-items: center;
  }
  .modal-overlay.active {
    display: flex;
  }

  /* Modal window */
  .modal {
    background-color: #111;
    border-radius: 20px;
    max-width: 360px;
    width: 95vw;
    max-height: 85vh;
    overflow-y: auto;
    box-shadow: 0 0 25px #ff4b00bb;
    padding: 25px 20px 20px 20px;
    color: white;
    user-select: none;
  }
  .modal h2 {
    font-weight: 900;
    font-size: 23px;
    color: #ff4b00;
    margin-top: 0;
    margin-bottom: 18px;
  }
  .modal p, .modal pre {
    margin: 5px 0 10px 0;
    line-height: 1.45em;
    font-size: 15px;
    color: #ccc;
    white-space: pre-line;
  }
  .modal strong, .modal b {
    color: #ff4b00;
  }
  .modal button.close {
    all: unset;
    display: block;
    cursor: pointer;
    margin: 28px auto 10px auto;
    background-color: #ff4b00;
    color: white;
    font-weight: 900;
    text-align: center;
    padding: 13px 18px;
    border-radius: 14px;
    width: 100%;
    user-select: none;
  }
  .modal button.close:hover {
    background-color: #e04300;
  }
  
  /* Form inside modal */
  form#adForm {
    display: flex;
    flex-direction: column;
    gap: 14px;
  }
  form#adForm input, form#adForm select {
    background-color: #222;
    border: none;
    border-radius: 12px;
    padding: 12px 14px;
    font-size: 17px;
    color: white;
  }
  form#adForm input::placeholder,
  form#adForm select option {
    color: #999;
  }
  form#adForm button[type="submit"] {
    background-color: #ff4b00;
    border: none;
    color: white;
    margin-top: 8px;
    padding: 14px 0;
    font-weight: 900;
    font-size: 18px;
    border-radius: 18px;
    cursor: pointer;
    user-select: none;
  }
  form#adForm button[type="submit"]:hover {
    background-color: #e04300;
  }
  form#adForm button.cancel {
    all: unset;
    margin-top: 12px;
    color: #ccc;
    text-align: center;
    cursor: pointer;
    user-select: none;
    font-weight: 600;
  }
  form#adForm button.cancel:hover {
    color: #ff4b00;
  }

  /* Scrollbar for container */
  ::-webkit-scrollbar {
    width: 7px;
    height: 7px;
  }
  ::-webkit-scrollbar-track {
    background: #111;
  }
  ::-webkit-scrollbar-thumb {
    background: #ff4b00;
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: #e04300;
  }

  /* Responsive */
  @media (min-width: 600px) {
    main {
      max-width: 480px;
      padding: 80px 30px 90px 30px;
    }
    #sidebar {
      width: 320px;
    }
    .modal {
      max-width: 400px;
    }
  }
</style>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

<header>
  <h1>DIABLO HUB</h1>
  <div id="menuToggle" aria-label="ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©" role="button" tabindex="0" aria-expanded="false">
    <span></span>
    <span></span>
    <span></span>
  </div>
</header>

<nav id="sidebar" aria-hidden="true">
  <h2>DIABLO HUB</h2>
  <button class="menu-btn primary" id="goHomeBtn" type="button">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ğŸ </button>
  <button class="menu-btn secondary" id="openAdFormBtn" type="button">Ø§Ù†Ø´Ø± Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡ +</button>
  <button class="menu-btn primary" id="openSpecialAdBtn" type="button">Ø¥Ø¹Ù„Ø§Ù† Ù…Ù…ÙŠØ² ğŸ’</button>
  <button class="menu-btn primary" id="toggleThemeBtn" type="button">ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¸Ù‡Ø± ğŸŒ™</button>

  <div class="info-links" style="margin-top: 28px;">
    <button type="button" data-info="terms">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ğŸ“œ</button>
    <button type="button" data-info="privacy">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© ğŸ”’</button>
    <button type="button" data-info="disclaimer">Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© âš ï¸</button>
  </div>
</nav>

<main>
  <h2>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£Ù‚ÙˆÙ‰ Ù…Ù†ØµØ© Ø¹Ù‚Ø§Ø±ÙŠØ© ÙÙŠ Ø§Ù„Ù…ØºØ±Ø¨</h2>
  <p class="subtitle">Ø§Ø¨Ø­Ø« Ø£Ùˆ Ø§Ù†Ø´Ø± Ø¨Ø³Ù‡ÙˆÙ„Ø©ØŒ Ø¨Ø®Ø·ÙˆØ§Øª Ø¨Ø³ÙŠØ·Ø© ÙˆÙ…ÙˆØ«ÙˆÙ‚Ø©.</p>

  <div id="browseButtons">
    <button id="browseRealBtn" class="primary">ØªØµÙØ­ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</button>
    <button id="publishOwnerBtn" class="secondary">(Ø£Ø±ÙŠØ¯ Ø§Ù„Ù†Ø´Ø± (Ù…Ø§Ù„Ùƒ</button>
  </div>

  <nav id="catNav" role="tablist" aria-label="ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª">
    <button role="tab" aria-selected="true" class="active" data-type="all">Ø§Ù„ÙƒÙ„</button>
    <button role="tab" aria-selected="false" data-type="Ø´Ù‚Ø©">Ø´Ù‚Ù‚ ğŸ™ï¸</button>
    <button role="tab" aria-selected="false" data-type="ÙÙŠÙ„Ø§">ÙÙŠÙ„Ø§Øª ğŸ°</button>
    <button role="tab" aria-selected="false" data-type="Ù…Ù†Ø²Ù„">Ù…Ù†Ø§Ø²Ù„ ğŸ¡</button>
    <button role="tab" aria-selected="false" data-type="Ø·Ù„Ø¨">Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ø­Ø« ğŸ“‹</button>
  </nav>

  <section id="adsList" aria-live="polite" aria-relevant="additions">
    <!-- Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
  </section>
</main>

<button id="addAdBtn" aria-label="Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯" title="Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯">+</button>

<!-- Modal Ù„Ù„Ù†Ø´Ø± -->
<div class="modal-overlay" id="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal" id="adModal" tabindex="0" aria-describedby="modalDescr">
    <h2 id="modalTitle">Ù…Ø§Ø°Ø§ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡ØŸ âœ¨</h2>
    <form id="adForm" novalidate>
      <input id="city" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©" type="text" required autocomplete="off" aria-required="true" />
      <input id="budget" placeholder="Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© (Ø¯.Ù…)" type="number" min="0" required aria-required="true" />
      <select id="adType" required aria-required="true" aria-label="Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±">
        <option value="" disabled selected>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±</option>
        <option value="Ø´Ù‚Ø©">Ø´Ù‚Ø©</option>
        <option value="ÙÙŠÙ„Ø§">ÙÙŠÙ„Ø§</option>
        <option value="Ù…Ù†Ø²Ù„">Ù…Ù†Ø²Ù„</option>
        <option value="Ø·Ù„Ø¨">Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡</option>
      </select>
      <input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (8-15 Ø±Ù‚Ù…)" type="tel" required pattern="^\d{8,15}$" aria-required="true" />
      <button type="submit" aria-label="ØªØ£ÙƒÙŠØ¯ ÙˆÙ†Ø´Ø± Ø§Ù„Ø·Ù„Ø¨">ØªØ£ÙƒÙŠØ¯ ÙˆÙ†Ø´Ø± Ø§Ù„Ø·Ù„Ø¨</button>
      <button type="button" id="cancelAdBtn" class="cancel">Ø¥Ù„ØºØ§Ø¡</button>
    </form>
  </div>
</div>

<!-- Modal Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª (Ø´Ø±ÙˆØ·ØŒ Ø³ÙŠØ§Ø³Ø©ØŒ Ø¥Ø®Ù„Ø§Ø¡ØŒ Ù…Ù…ÙŠØ²) -->
<div class="modal-overlay" id="infoOverlay" role="dialog" aria-modal="true" aria-labelledby="infoTitle" aria-describedby="infoContent">
  <div class="modal" tabindex="0">
    <h2 id="infoTitle">Ø¹Ù†ÙˆØ§Ù†</h2>
    <pre id="infoContent" style="white-space: pre-line; font-family: 'Cairo', sans-serif;"></pre>
    <button id="closeInfoBtn" class="close">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<script>
  // Firebase configuration with your keys
  const firebaseConfig = {
    apiKey: "AIzaSyCGWNteBBsejx6UISfvnTY1YmnQeom7vNg",
    authDomain: "daiblosmart.firebaseapp.com",
    projectId: "daiblosmart",
    storageBucket: "daiblosmart.appspot.com",
    messagingSenderId: "1234567890",  // Ø¹Ø¯Ù„Ù‡Ø§ Ù…Ø¹ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
    appId: "1:1234567890:web:abcdef123456" // Ø¹Ø¯Ù„Ù‡Ø§ Ù…Ø¹ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Ø¹Ù†Ø§ØµØ± DOM
  const menuToggle = document.getElementById('menuToggle');
  const sidebar = document.getElementById('sidebar');
  const goHomeBtn = document.getElementById('goHomeBtn');
  const openAdFormBtn = document.getElementById('openAdFormBtn');
  const openSpecialAdBtn = document.getElementById('openSpecialAdBtn');
  const toggleThemeBtn = document.getElementById('toggleThemeBtn');

  const browseRealBtn = document.getElementById('browseRealBtn');
  const publishOwnerBtn = document.getElementById('publishOwnerBtn');

  const catNav = document.getElementById('catNav');
  const adsList = document.getElementById('adsList');

  const addAdBtn = document.getElementById('addAdBtn');

  const modalOverlay = document.getElementById('modalOverlay');
  const adModal = document.getElementById('adModal');
  const adForm = document.getElementById('adForm');
  const cancelAdBtn = document.getElementById('cancelAdBtn');

  const infoOverlay = document.getElementById('infoOverlay');
  const infoTitle = document.getElementById('infoTitle');
  const infoContent = document.getElementById('infoContent');
  const closeInfoBtn = document.getElementById('closeInfoBtn');

  // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
  const infoTexts = {
    terms: `Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
ÙŠØ±Ø¬Ù‰ Ù‚Ø±Ø§Ø¡Ø© Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø¹Ù†Ø§ÙŠØ©. Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Diablo HubØŒ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªØ§Ù„ÙŠØ©:
1. Ø¯Ù‚Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª: ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙˆÙ…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹.
2. Ø§Ù„Ù…Ø­ØªÙˆÙ‰: ÙŠÙ…Ù†Ø¹ Ù†Ø´Ø± Ø£ÙŠ Ù…Ø­ØªÙˆÙ‰ ÙŠØ±ÙˆØ¬ Ù„Ù„Ø¹Ù†ÙØŒ Ø§Ù„ØªÙ…ÙŠÙŠØ²ØŒ Ø£Ùˆ ÙŠØ®Ø§Ù„Ù Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø¬Ø§Ø±ÙŠ Ø¨Ù‡Ø§ Ø§Ù„Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØºØ±Ø¨ÙŠØ©.
3. Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¤ÙˆÙ„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ù† ØµØ­Ø© Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©.
4. Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª: Ù†Ø­ØªÙØ¸ Ø¨Ø§Ù„Ø­Ù‚ ÙÙŠ Ø­Ø°Ù Ø£ÙŠ Ø¥Ø¹Ù„Ø§Ù† ÙŠØ¨ÙŠÙ† Ø£Ù†Ù‡ Ù…Ø¶Ù„Ù„ Ø£Ùˆ ÙˆÙ‡Ù…ÙŠ Ø¯ÙˆÙ† Ø³Ø§Ø¨Ù‚ Ø¥Ù†Ø°Ø§Ø±.`,

    privacy: `Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©
Ù†Ø­Ù† Ù†Ù‡ØªÙ… Ø¨Ø®ØµÙˆØµÙŠØªÙƒ ÙˆÙÙ‚Ù‹Ø§ Ù„Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ 08-09 Ø§Ù„Ù…ØªØ¹Ù„Ù‚ Ø¨Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¹Ø·ÙŠØ§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©:
1. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙŠ Ù†Ø¬Ù…Ø¹Ù‡Ø§: Ù†Ø¬Ù…Ø¹ ÙÙ‚Ø· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙŠ ØªÙ‚Ø¯Ù…Ù‡Ø§ Ø·ÙˆØ¹Ù‹Ø§ (Ø§Ù„Ø§Ø³Ù…ØŒ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙØŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹) Ø¨ØºØ±Ø¶ ØªØ³Ù‡ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ.
2. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: Ù†Ø³ØªØ®Ø¯Ù… Ù…Ø¹Ø±Ù Ø§Ù„Ù…ØªØµÙØ­ (localStorage) Ù„ØªÙ…ÙƒÙŠÙ†Ùƒ Ù…Ù† Ø¥Ø¯Ø§Ø±Ø© ÙˆØ­Ø°Ù Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙƒ Ø§Ù„Ø®Ø§ØµØ© ÙÙ‚Ø·.
3. Ù…Ù„ÙØ§Øª ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø·: Ù‚Ø¯ Ù†Ø³ØªØ®Ø¯Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø¨Ø³ÙŠØ·Ø© Ù„ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªÙˆØ§ÙÙ‚ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø¹ Google Ads.
4. Ø¹Ø¯Ù… Ø§Ù„Ø¨ÙŠØ¹: Ù†Ø­Ù† Ù†Ø¤ÙƒØ¯ Ø§Ù„ØªØ²Ø§Ù…Ù†Ø§ Ø¨Ø¹Ø¯Ù… Ø¨ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ø£ÙŠ Ø·Ø±Ù Ø«Ø§Ù„Ø« Ù„Ø£ØºØ±Ø§Ø¶ ØªØ³ÙˆÙŠÙ‚ÙŠØ© ØºÙŠØ± Ù…ØµØ±Ø­ Ø¨Ù‡Ø§.`,

    disclaimer: `Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©
ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù… Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:
1. Ø§Ù„ÙˆØ³Ø§Ø·Ø©: Ù…Ù†ØµØ© Diablo Hub Ù‡ÙŠ Ù…Ù†ØµØ© Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© ÙˆØ³ÙŠØ·Ø© ÙÙ‚Ø·ØŒ ÙˆÙ„Ø§ ØªØ¯Ø®Ù„ ÙÙŠ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨ÙŠØ¹ØŒ Ø§Ù„Ø´Ø±Ø§Ø¡ØŒ Ø£Ùˆ Ø§Ù„ÙƒØ±Ø§Ø¡ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø·Ø±Ø§Ù.
2. Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø§Øª: Ù†Ù†ØµØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø¹Ù„Ù‰ Ø£Ø±Ø¶ Ø§Ù„ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ù‚Ø¨Ù„ Ø¯ÙØ¹ Ø£ÙŠ Ù…Ø¨Ø§Ù„Øº Ù…Ø§Ù„ÙŠØ©.
3. Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ù…Ø§Ù„ÙŠ: Ø§Ù„Ù…Ù†ØµØ© ØºÙŠØ± Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø£ÙŠ Ø§Ø­ØªÙŠØ§Ù„ Ù‚Ø¯ ÙŠÙ‚Ø¹ Ø®Ø§Ø±Ø¬ Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ ÙˆÙ†Ø­Ù† Ù„Ø§ Ù†Ø·Ù„Ø¨ Ø£Ø¨Ø¯Ø§Ù‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ù†ÙƒÙŠØ© Ø¹Ø¨Ø± Ø§Ù„Ù…Ù†ØµØ©.
4. Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©: Ø£ÙŠ Ø±ÙˆØ§Ø¨Ø· ØªØ¤Ø¯ÙŠ Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø£Ø®Ø±Ù‰ Ù‡ÙŠ Ø¹Ù„Ù‰ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø®Ø§ØµØ©.`,

    special: `ØªÙ…ÙŠÙ‘Ø² Ø§Ù„Ø¢Ù† âœ¨
Ø§Ø¬Ø¹Ù„ Ø¥Ø¹Ù„Ø§Ù†Ùƒ ÙÙŠ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¨Ù„ÙˆÙ† Ø¬Ø°Ø§Ø¨.
Ø³Ø¹Ø± Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø§Ù„Ù…Ù…ÙŠØ²: 1$
Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ…ÙŠÙ‘Ø² ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨:`
  };

  // Helper: Ø­ÙØ¸ theme ÙÙŠ localStorage
  function applyTheme(theme) {
    if(theme === 'light') {
      document.body.style.backgroundColor = "#fefefe";
      document.body.style.color = "#222";
      toggleThemeBtn.textContent = "ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¸Ù‡Ø± ğŸŒ™";
      localStorage.setItem('theme','light');
    } else {
      document.body.style.backgroundColor = "#000";
      document.body.style.color = "#fff";
      toggleThemeBtn.textContent = "ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¸Ù‡Ø± â˜€ï¸";
      localStorage.setItem('theme','dark');
    }
  }
  function loadTheme() {
    const theme = localStorage.getItem('theme') || 'dark';
    applyTheme(theme);
  }

  // Toggle sidebar
  menuToggle.onclick = () => {
    if(sidebar.classList.contains('open')){
      sidebar.classList.remove('open');
      menuToggle.setAttribute('aria-expanded','false');
      sidebar.setAttribute('aria-hidden','true');
    } else {
      sidebar.classList.add('open');
      menuToggle.setAttribute('aria-expanded','true');
      sidebar.setAttribute('aria-hidden','false');
    }
  };
  // Close sidebar by clicking on main content
  window.addEventListener('click', e => {
    if(!sidebar.contains(e.target) && !menuToggle.contains(e.target)){
      sidebar.classList.remove('open');
      menuToggle.setAttribute('aria-expanded','false');
      sidebar.setAttribute('aria-hidden','true');
    }
  });

  // NAVIGATION BUTTONS IN SIDEBAR
  goHomeBtn.onclick = () => {
    sidebar.classList.remove('open');
    setActiveCategory('all');
  };
  openAdFormBtn.onclick = () => {
    sidebar.classList.remove('open');
    openAdModal();
  };
  openSpecialAdBtn.onclick = () => {
    sidebar.classList.remove('open');
    openInfoModal('special');
  };
  toggleThemeBtn.onclick = () => {
    const currentTheme = localStorage.getItem('theme') || 'dark';
    if(currentTheme === 'dark') applyTheme('light');
    else applyTheme('dark');
  };

  // BROWSE BUTTONS IN MAIN
  browseRealBtn.onclick = () => {
    setActiveCategory('all');
    window.scrollTo({top:0, behavior:"smooth"});
  };
  publishOwnerBtn.onclick = () => {
    openAdModal();
  };

  // CATEGORY NAVIGATION
  const catsBtns = catNav.querySelectorAll('button');
  let currentCategory = 'all';

  function setActiveCategory(type) {
    currentCategory = type;
    catsBtns.forEach(b=>{
      if(b.getAttribute('data-type') === type){
        b.classList.add('active');
        b.setAttribute('aria-selected', 'true');
      } else {
        b.classList.remove('active');
        b.setAttribute('aria-selected', 'false');
      }
    });
    loadAds(type);
  }

  catsBtns.forEach(btn=>{
    btn.onclick = () => {
      setActiveCategory(btn.getAttribute('data-type'));
      window.scrollTo({top:0, behavior:"smooth"});
    }
  });

  // LOAD ADS FROM FIRESTORE
  async function loadAds(filterType='all') {
    adsList.innerHTML = `<p style="text-align:center;opacity:0.5;">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª...</p>`;
    try {
      let query = db.collection("ads").orderBy("timestamp", "desc");
      if(filterType !== 'all'){
        if(filterType === 'Ø·Ù„Ø¨') query = db.collection("ads").where("type", "==", "Ø·Ù„Ø¨").orderBy("timestamp", "desc");
        else query = db.collection("ads").where("type", "==", filterType).orderBy("timestamp", "desc");
      }
      const snapshot = await query.get();
      if(snapshot.empty){
        adsList.innerHTML = `<p style="text-align:center;opacity:0.5;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>`;
        return;
      }
      adsList.innerHTML = '';
      snapshot.forEach(doc=>{
        const data = doc.data();
        // format number with commas
        const formattedBudget = data.budget.toLocaleString('ar-EG');
        const adEl = document.createElement('div');
        adEl.className = 'ad-item';
        adEl.innerHTML = `
          <strong>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</strong> ${escapeHtml(data.city)} |
          <strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${escapeHtml(data.type)} |
          <strong>Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©:</strong> ${formattedBudget} Ø¯.Ù… |
          <strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> <a href="tel:${escapeHtml(data.phone)}">${escapeHtml(data.phone)}</a>
        `;
        adsList.appendChild(adEl);
      });
    } catch(e) {
      adsList.innerHTML = `<p style="text-align:center;opacity:0.5;">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª.</p>`;
      console.error(e);
    }
  }

  // ESCAPE HTML TO PREVENT XSS
  function escapeHtml(text) {
    return text.replace(/[&<>"']/g, function(m) {
      return {'&':'&amp;', '<':'&lt;', '>':'&gt;', '"':'&quot;', "'":'&#39;'}[m];
    });
  }

  // OPEN AND CLOSE AD MODAL
  function openAdModal() {
    adForm.reset();
    modalOverlay.classList.add('active');
    adModal.focus();
  }
  function closeAdModal() {
    modalOverlay.classList.remove('active');
    adForm.reset();
  }

  addAdBtn.onclick = openAdModal;
  openAdFormBtn.onclick = openAdModal;
  
  cancelAdBtn.onclick = closeAdModal;
  modalO
