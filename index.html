<!DOCTYPE html>
<html lang="ar" dir="rtl" id="diablo-app">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Diablo Hub | AI Social Edition</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>

    <style>
        :root { --p: #ff4500; --bg: #050505; --card: #111; --t: #fff; --border: #222; --bot-bg: #444; }
        .light-mode { --bg: #f5f5f5; --card: #fff; --t: #222; --border: #ddd; --bot-bg: #eee; }
        
        html, body { height: 100%; margin: 0; padding: 0; }
        body { background: var(--bg); color: var(--t); font-family: 'Cairo', sans-serif; transition: 0.3s; display: flex; flex-direction: column; min-height: 100vh; }
        
        header { padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; background: var(--card); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 1000; }
        
        .page-content { flex: 1; padding: 15px 5%; width: 100%; box-sizing: border-box; display: none; }
        .post-card { background: var(--card); border: 1px solid var(--border); border-radius: 15px; margin-bottom: 20px; padding: 15px; position: relative; }
        .img-slider { display: flex; overflow-x: auto; gap: 10px; }
        .img-slider img { height: 200px; border-radius: 12px; object-fit: cover; border: 1px solid var(--border); }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø°ÙƒÙŠ */
        #diablo-ai-bot {
            position: fixed; bottom: 100px; left: 20px; width: 55px; height: 55px;
            background: linear-gradient(45deg, var(--p), #ff8c00);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 20px rgba(255, 69, 0, 0.5); z-index: 5000; cursor: pointer;
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid #fff;
        }
        #bot-message {
            position: absolute; bottom: 65px; right: 0; width: 220px;
            background: var(--card); color: var(--t); border: 1px solid var(--p);
            padding: 12px; border-radius: 15px; font-size: 13px; display: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5); line-height: 1.5;
        }

        .side-menu { position: fixed; top: 0; right: -100%; width: 280px; height: 100%; background: var(--card); z-index: 3000; transition: 0.4s; padding: 20px; border-left: 1px solid var(--border); }
        .side-menu.active { right: 0; }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; z-index: 2500; backdrop-filter: blur(5px); }

        .btn { background: var(--p); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; }
        input, textarea { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid var(--border); background: var(--bg); color: var(--t); }
        .ads-footer { position: fixed; bottom: 0; left: 0; width: 100%; height: 85px; background: #000; border-top: 2px solid var(--p); display: flex; justify-content: space-around; align-items: center; z-index: 4000; }
        .admin-del { position: absolute; top: 10px; left: 10px; background: red; color: white; border: none; border-radius: 5px; padding: 5px 10px; font-size: 12px; z-index: 10; cursor: pointer;}
    </style>
</head>
<body id="body-main">

<div id="diablo-ai-bot" onclick="startAiGuide()">
    <span style="font-size: 24px;">ğŸ¤–</span>
    <div id="bot-message">Ù†ÙˆØ±Øª Ø¯ÙŠØ§Ø¨Ù„Ùˆ Ù‡Ø¨! Ø§Ø¶ØºØ· Ø¹Ù„ÙŠÙ‘ Ù„Ø£Ø´Ø±Ø­ Ù„Ùƒ Ø§Ù„Ù…ÙƒØ§Ù†.</div>
</div>

<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<div class="side-menu" id="sideMenu">
    <h2 style="color:var(--p)">DIABLO HUB</h2>
    <a href="#" style="display:block; color:var(--t); padding:12px 0; text-decoration:none;" onclick="showPage('home')">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="#" style="display:block; color:var(--t); padding:12px 0; text-decoration:none;" onclick="showPage('favs')">â¤ï¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©</a>
    <a href="#" style="display:block; color:var(--t); padding:12px 0; text-decoration:none;" onclick="showPage('auth')">ğŸ‘¤ Ø­Ø³Ø§Ø¨ÙŠ</a>
    <hr style="border-color:var(--border); margin:15px 0;">
    <a href="#" style="display:block; color:var(--t); padding:10px 0; text-decoration:none; font-size:14px;" onclick="showPage('privacy')">ğŸ›¡ï¸ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© ÙˆØ§Ù„Ø¥Ø®Ù„Ø§Ø¡</a>
    <button class="btn" style="margin-top: 20px; background: #333;" onclick="toggleMenu()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<header id="main-header">
    <div style="display:flex; align-items:center; gap:10px;">
        <button id="menu-trigger" onclick="toggleMenu()" style="background:none; border:none; color:var(--p); font-size:24px;">â˜°</button>
        <div style="font-weight:bold; color:var(--p); font-size:1.2rem;">DIABLO HUB</div>
    </div>
    <button onclick="toggleTheme()" style="background:none; border:1px solid var(--p); color:var(--p); border-radius:20px; padding:4px 12px;">MODE</button>
</header>

<div id="homePage" class="page-content" style="display:block;">
    <div id="roleSelection" style="text-align:center; padding: 30px 0;">
        <button class="btn" id="btn-inv" onclick="initApp('investor')" style="max-width:250px;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±ÙŠÙ†</button>
        <button class="btn" id="btn-sell" onclick="initApp('seller')" style="max-width:250px; margin-top:10px; background:#222; border:1px solid var(--p);">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù„Ø§Ùƒ</button>
    </div>

    <div id="uploadArea" style="display:none; background:var(--card); padding:20px; border-radius:15px; border:1px solid var(--border); margin-bottom:20px;">
        <h4 style="margin:0 0 10px 0; color:var(--p);">Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯</h4>
        <input type="text" id="pTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù‚Ø§Ø±...">
        <textarea id="pDesc" rows="3" placeholder="ØªØ­Ø¯Ø« Ù…Ø¹ÙŠ Ù‡Ù†Ø§.. Ø§ÙƒØªØ¨ 'Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…' Ø£Ùˆ 'ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ'" oninput="aiSocialTalk(this.value)"></textarea>
        <input type="tel" id="pPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù„ØªÙˆØ§ØµÙ„...">
        <input type="file" id="pFiles" multiple accept="image/*" onchange="handleFiles(this.files)">
        <div id="preGrid" style="display:flex; gap:10px; margin:10px 0; flex-wrap: wrap;"></div>
        <button class="btn" onclick="uploadToFirebase()">Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø¢Ù†</button>
    </div>
    <div id="cloudFeed"></div>
</div>

<div id="authPage" class="page-content"><div id="loginForm" style="text-align:center;"><h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3><input type="email" id="email" placeholder="Email"><input type="password" id="pass" placeholder="Password"><button class="btn" onclick="handleAuth()">Ø¯Ø®ÙˆÙ„</button></div></div>
<div id="favsPage" class="page-content"><h2>â¤ï¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©</h2><div id="favFeed"></div></div>
<div id="privacyPage" class="page-content"><h2>ğŸ›¡ï¸ Ø§Ù„Ø®ØµÙˆØµÙŠØ©</h2><p>Ù†Ø­Ù† Ù†Ø­Ù…ÙŠ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆÙ†Ø³ØªØ®Ø¯Ù… Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¬ÙˆØ¬Ù„.</p></div>

<div class="ads-footer">
    <div class="ad-box">Ad Slot 1</div>
    <div class="ad-box">Ad Slot 2</div>
    <div class="ad-box">Ad Slot 3</div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyCGWNteBBsejx6UISfvnTY1YmnQeom7vNg",
        authDomain: "daiblosmart.firebaseapp.com",
        projectId: "daiblosmart",
        storageBucket: "daiblosmart.firebasestorage.app",
        messagingSenderId: "948075676362",
        appId: "1:948075676362:web:c27d582068712cbe13aa33"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();
    let tempImgs = [], isAdmin = false;

    // Ø¬ÙˆÙ„Ø© Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø°ÙƒÙŠ (ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø¨Ø¯Ù‚Ø©)
    function startAiGuide() {
        const bot = document.getElementById('diablo-ai-bot');
        const msg = document.getElementById('bot-message');
        msg.style.display = "block";

        const btnSell = document.getElementById('btn-sell');
        const rect1 = btnSell.getBoundingClientRect();
        msg.innerText = "Ø¥Ø°Ø§ ÙƒÙ†Øª ØªÙ…Ù„Ùƒ Ø´Ù‚Ø©ØŒ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„ØªØ¨Ø¯Ø£ Ø§Ù„Ù†Ø´Ø±!";
        bot.style.transform = `translate(${rect1.left - 20}px, ${rect1.top - bot.offsetTop - 60}px)`;

        setTimeout(() => {
            const menuBtn = document.getElementById('menu-trigger');
            const rect2 = menuBtn.getBoundingClientRect();
            msg.innerText = "ÙˆÙ…Ù† Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©!";
            bot.style.transform = `translate(${rect2.left - 20}px, ${rect2.top - bot.offsetTop}px)`;

            setTimeout(() => {
                msg.innerText = "Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠØŒ Ø¬Ø±Ø¨ Ø§Ù„Ø­Ø¯ÙŠØ« Ù…Ø¹ÙŠ ÙÙŠ Ø®Ø§Ù†Ø© Ø§Ù„ÙˆØµÙ!";
                bot.style.transform = `translate(0px, 0px)`;
                setTimeout(() => msg.style.display = "none", 4000);
            }, 3500);
        }, 3500);
    }

    // Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ù„Ù„Ø¨ÙˆØª (Ø§Ù„Ø±Ø¯ ÙˆØ§Ù„ØªØ­ÙŠØ©)
    function aiSocialTalk(val) {
        const msg = document.getElementById('bot-message');
        msg.style.display = "block";
        const t = val.toLowerCase().trim();

        if (t.includes("Ø³Ù„Ø§Ù…") || t.includes("Ù…Ø±Ø­Ø¨Ø§") || t.includes("Ø§Ù‡Ù„Ø§")) {
            msg.innerText = "ğŸ‘‹ ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù… ÙŠØ§ Ø¨Ø·Ù„! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ";
        } else if (t.includes("ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ") || t.includes("Ø´Ø®Ø¨Ø§Ø±Ùƒ")) {
            msg.innerText = "ğŸ˜Š Ø£Ù†Ø§ Ø¨Ø£ÙØ¶Ù„ Ø­Ø§Ù„ Ù…Ø§ Ø¯Ø§Ù… 'Ø¯ÙŠØ§Ø¨Ù„Ùˆ Ù‡Ø¨' ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­! ÙˆØ£Ù†ØªØŸ";
        } else if (t.includes("Ø´ÙƒØ±Ø§") || t.includes("ØªØ³Ù„Ù…")) {
            msg.innerText = "ğŸŒ¹ Ø§Ù„Ø¹ÙÙˆ! Ù‡Ø°Ø§ ÙˆØ§Ø¬Ø¨ÙŠ Ù„Ø®Ø¯Ù…Ø© Ù…Ø¬ØªÙ…Ø¹ Ø¯ÙŠØ§Ø¨Ù„Ùˆ.";
        } else if (t.includes("Ø³Ø¹Ø±") || t.includes("Ø¨ÙƒÙ…")) {
            msg.innerText = "ğŸ’¡ Ù†ØµÙŠØ­Ø©: ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø¹Ø± Ø¨ÙˆØ¶ÙˆØ­ ÙŠØ²ÙŠØ¯ Ù…Ù† ÙØ±Øµ Ø¨ÙŠØ¹ Ø¹Ù‚Ø§Ø±Ùƒ!";
        } else if (t.length > 20) {
            msg.innerText = "ğŸ‘€ Ø£Ø­Ù„Ù„ Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ø§Ù„Ø¢Ù†.. ÙŠØ¨Ø¯Ùˆ ÙˆØµÙØ§Ù‹ Ø§Ø­ØªØ±Ø§ÙÙŠØ§Ù‹!";
        } else {
            msg.innerText = "ğŸ¤– Ø£Ù†Ø§ Ø£Ø³Ù…Ø¹Ùƒ.. Ø£ÙƒÙ…Ù„ ÙƒØªØ§Ø¨Ø© ØªÙØ§ØµÙŠÙ„ Ø¹Ù‚Ø§Ø±Ùƒ.";
        }
    }

    // Ø¨Ù‚ÙŠØ© ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙƒÙˆØ¯ (Ø¯ÙˆÙ† Ø£ÙŠ ØªØºÙŠÙŠØ± ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚)
    auth.onAuthStateChanged(user => {
        if (user) {
            if(user.email === "diablo@admin.com") isAdmin = true;
            loadCloudData();
        }
    });

    function handleAuth() {
        const e = document.getElementById('email').value, p = document.getElementById('pass').value;
        auth.signInWithEmailAndPassword(e, p).catch(() => auth.createUserWithEmailAndPassword(e, p));
    }

    function initApp(role) {
        document.getElementById('roleSelection').style.display = 'none';
        if(role === 'seller') document.getElementById('uploadArea').style.display = 'block';
        loadCloudData();
    }

    function handleFiles(files) {
        Array.from(files).forEach(f => {
            const r = new FileReader();
            r.onload = e => {
                tempImgs.push({src: e.target.result, id: Date.now()});
                document.getElementById('preGrid').innerHTML += `<img src="${e.target.result}" style="width:60px; height:60px; border-radius:8px; object-fit:cover; margin:5px;">`;
            };
            r.readAsDataURL(f);
        });
    }

    function uploadToFirebase() {
        const t = document.getElementById('pTitle').value, d = document.getElementById('pDesc').value, ph = document.getElementById('pPhone').value;
        if(!t || tempImgs.length === 0) return alert("Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©!");
        db.collection("diablo_posts").add({ title: t, desc: d, phone: ph, imgs: tempImgs.map(i => i.src), time: Date.now() }).then(() => location.reload());
    }

    function loadCloudData() {
        db.collection("diablo_posts").orderBy("time", "desc").onSnapshot(snap => {
            const feed = document.getElementById('cloudFeed');
            feed.innerHTML = "";
            snap.forEach(doc => {
                const p = doc.data();
                feed.innerHTML += `
                    <div class="post-card">
                        ${isAdmin ? `<button class="admin-del" onclick="deletePost('${doc.id}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>` : ''}
                        <div class="img-slider">${p.imgs.map(i => `<img src="${i}">`).join('')}</div>
                        <h3>${p.title}</h3>
                        <p>${p.desc}</p>
                        ${p.phone ? `<a href="tel:${p.phone}" style="color:var(--p); font-weight:bold; text-decoration:none;">ğŸ“ Ø§ØªØµÙ„: ${p.phone}</a>` : ''}
                    </div>`;
            });
        });
    }

    function deletePost(id) { if(confirm("Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠØŸ")) db.collection("diablo_posts").doc(id).delete(); }
    function showPage(p) { document.querySelectorAll('.page-content').forEach(c => c.style.display='none'); document.getElementById(p+'Page').style.display='block'; toggleMenu(); }
    function toggleMenu() { const m = document.getElementById('sideMenu'); m.classList.toggle('active'); document.getElementById('overlay').style.display = m.classList.contains('active') ? 'block' : 'none'; }
    function toggleTheme() { document.body.classList.toggle('light-mode'); }
</script>
</body>
    </html>
    
